//---------------------------------------------------------------------------
#include <vcl.h>
#pragma hdrstop
int time_mas0(0),time_mas1(0),time_mas2(0);
int step_mas0(0),step_mas1(0),step_mas2(0);
#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
#define N 100
#include <ctime>
void sort(int *mas,int num);
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
        : TForm(Owner)
{
        srand(time(NULL));
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Button1Click(TObject *Sender)
{
        time_mas0=0;
        time_mas1=0;
        time_mas2=0;
        step_mas0=0;
        step_mas1=0;
        step_mas2=0;
        int mas0[N]; //Отсортированный массив
        int mas1[N]; //Остортированный в обратном порядке
        int mas2[N]; //Отсортированный рандомно
        for(int i=0;i<N;i++)
                mas0[i]=i;
        for(int i=N-1;i>=0;i--)
                mas1[i]=N-i;
        for(int i=0;i<N;i++)
                mas2[i]=rand()% 600;

        sort(mas0,0);
        sort(mas1,1);
        sort(mas2,2);

        Series1->Clear();
        Series1->Add(step_mas0,"Перестановок 1",clRed);
        Series1->Add(step_mas1,"Перестановок 2",clBlue);
        Series1->Add(step_mas2,"Перестановок 3",clYellow);

        Series2->Clear();
        Series2->Add(time_mas0,"Время 1",clRed);
        Series2->Add(time_mas1,"Время 2",clBlue);
        Series2->Add(time_mas2,"Время 3",clYellow);

        

}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer_mas0Timer(TObject *Sender)
{
        time_mas0++;
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer_mas1Timer(TObject *Sender)
{
        time_mas1++;
}
//---------------------------------------------------------------------------
void __fastcall TForm1::Timer_mas2Timer(TObject *Sender)
{
        time_mas2++;
}
//---------------------------------------------------------------------------

void sort(int *mas,int num)
{
        int r = num;
        if(r==0)
                Form1->Timer_mas0->Enabled=true;
        if(r==1)
                Form1->Timer_mas1->Enabled=true;
        if(r==2)
                Form1->Timer_mas2->Enabled=true;
        for(int step = N/2;step>0;step/=2)
                for(int i=0;i<N-step;i++)
                {
                        for(int j=i;j>=0 && mas[j] > mas[j+step];j--)
                        {
                                int temp = mas[j];
                                mas[j]=mas[j+step];
                                mas[j+step]=temp;
                                if(r==0)
                                        step_mas0++;
                                if(r==1)
                                        step_mas1++;
                                if(r==2)
                                        step_mas2++;
                        }
                }
        if(r==0)
                Form1->Timer_mas0->Enabled=false;
        if(r==1)
                Form1->Timer_mas1->Enabled=false;
        if(r==2)
                Form1->Timer_mas2->Enabled=false;
}

//----------------------------------------------------------------------------